{% extends 'base.html' %}
{% block content %}
<div class="row">
    <div class="col-md-4 text-center">
        <img src="https://ui-avatars.com/api/?name={{ user_profile.username }}&size=150" class="rounded-circle mb-3">
    </div>
    <div class="col-md-8">
        <h2>{{ user_profile.username }}</h2>
        <div class="d-flex mb-3">
            <div class="me-4"><strong>{{ posts_count }}</strong> 帖子</div>
            <div class="me-4"><strong>{{ followers_count }}</strong> 粉丝</div>
            <div class="me-4"><strong>{{ following_count }}</strong> 关注</div>
        </div>
        {% if user.username != user_profile.username %}
            <a href="{% url 'toggle_follow' user_profile.id %}" class="btn btn-primary btn-sm">
                {% if request.user in user_profile.followers.all %}取消关注{% else %}关注TA{% endif %}
            </a>
        {% endif %}
    </div>
</div>
<hr>
<div class="row">
    {% for post in user_posts %}
    <div class="col-md-4 mb-4">
        <div class="card">
            <img src="{{ post.image.url }}" class="card-img-top" style="height: 250px; object-fit: cover;">
        </div>
    </div>
    {% empty %}
    <p class="text-center">该用户还没有发布动态。</p>
    {% endfor %}
</div>
{% endblock %}