{% extends 'base.html' %}
{% block content %}
<div class="row align-items-center mb-5">
    <div class="col-md-4 text-center">
        <img src="https://ui-avatars.com/api/?name={{ user_profile.username }}&size=150&background=random&color=fff" 
             class="rounded-circle shadow-sm mb-3">
    </div>
    <div class="col-md-8">
        <div class="d-flex align-items-center mb-3">
            <h2 class="me-4 mb-0">{{ user_profile.username }}</h2>
            
            {% if user.is_authenticated and user.id != user_profile.id %}
                {% if user_profile.id in following_ids %}
                    <a href="{% url 'toggle_follow' user_profile.id %}" class="btn btn-secondary btn-sm px-4">取消关注</a>
                {% else %}
                    <a href="{% url 'toggle_follow' user_profile.id %}" class="btn btn-primary btn-sm px-4">关注TA</a>
                {% endif %}
            {% endif %}
        </div>

        <div class="d-flex mb-3">
            <div class="me-5"><strong>{{ posts_count }}</strong> 帖子</div>
            <div class="me-5"><strong>{{ followers_count }}</strong> 粉丝</div>
            <div class="me-5"><strong>{{ following_count }}</strong> 关注</div>
        </div>
    </div>
</div>
<hr class="mb-5">
<div class="row">
    {% for post in user_posts %}
    <div class="col-md-4 mb-4">
        <div class="card border-0 shadow-sm">
            <img src="{{ post.image.url }}" class="card-img-top" style="height: 300px; object-fit: cover;">
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}